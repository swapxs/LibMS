[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] POST   /register                 --> github.com/swapxs/LibMS/backend/test.TestRegisterUser.RegisterUser.func1 (3 handlers)

2025/02/19 14:43:03 [31;1m/home/xs514-swabho/Documents/L2/LibraryManagementSystem/backend/controllers/auth.go:45 [35;1mrecord not found
[0m[33m[0.089ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE email = "test@example.com" AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2025/02/19 - 14:43:03 | 201 |   81.009273ms |                 | POST     "/register"
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] POST   /login                    --> github.com/swapxs/LibMS/backend/test.TestLoginUser.Login.func1 (3 handlers)

2025/02/19 14:43:04 [31;1m/home/xs514-swabho/Documents/L2/LibraryManagementSystem/backend/controllers/auth.go:116 [35;1mrecord not found
[0m[33m[0.048ms] [34;1m[rows:0][0m SELECT * FROM `libraries` WHERE `libraries`.`id` = 1 AND `libraries`.`deleted_at` IS NULL ORDER BY `libraries`.`id` LIMIT 1
[GIN] 2025/02/19 - 14:43:04 | 200 |   75.731509ms |                 | POST     "/login"
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] POST   /books                    --> github.com/swapxs/LibMS/backend/test.TestAddBook.AddOrIncrementBook.func1 (3 handlers)


[31m2025/02/19 14:43:04 [Recovery] 2025/02/19 - 14:43:04 panic recovered:
POST /books HTTP/1.1
Content-Type: application/json


Key "user" does not exist
/home/xs514-swabho/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:284 (0x744ac7)
	(*Context).MustGet: panic("Key \"" + key + "\" does not exist")
/home/xs514-swabho/Documents/L2/LibraryManagementSystem/backend/controllers/book.go:36 (0x80d799)
	TestAddBook.AddOrIncrementBook.func1: claims := c.MustGet("user").(jwt.MapClaims)
/home/xs514-swabho/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 (0x7497ee)
	(*Context).Next: c.handlers[c.index](c)
/home/xs514-swabho/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102 (0x7497db)
	CustomRecoveryWithWriter.func1: c.Next()
/home/xs514-swabho/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 (0x748924)
	(*Context).Next: c.handlers[c.index](c)
/home/xs514-swabho/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249 (0x74890b)
	LoggerWithConfig.func1: c.Next()
/home/xs514-swabho/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 (0x747d11)
	(*Context).Next: c.handlers[c.index](c)
/home/xs514-swabho/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633 (0x747780)
	(*Engine).handleHTTPRequest: c.Next()
/home/xs514-swabho/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589 (0x747411)
	(*Engine).ServeHTTP: engine.handleHTTPRequest(c)
/home/xs514-swabho/Documents/L2/LibraryManagementSystem/backend/test/book_test.go:44 (0x80d5e4)
	TestAddBook: router.ServeHTTP(w, req)
/usr/local/go/src/testing/testing.go:1690 (0x5186d3)
	tRunner: fn(t)
/usr/local/go/src/runtime/asm_amd64.s:1700 (0x47c940)
	goexit: BYTE	$0x90	// NOP
[0m
[GIN] 2025/02/19 - 14:43:04 | 500 |    1.073085ms |                 | POST     "/books"
--- FAIL: TestAddBook (0.00s)
    book_test.go:46: 
        	Error Trace:	/home/xs514-swabho/Documents/L2/LibraryManagementSystem/backend/test/book_test.go:46
        	Error:      	Not equal: 
        	            	expected: 201
        	            	actual  : 500
        	Test:       	TestAddBook
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] POST   /issue/:id                --> github.com/swapxs/LibMS/backend/test.TestIssueBook.func1 (3 handlers)
[GIN] 2025/02/19 - 14:43:04 | 400 |      14.929Âµs |                 | POST     "/issue/1"
--- FAIL: TestIssueBook (0.01s)
    issue_test.go:72: 
        	Error Trace:	/home/xs514-swabho/Documents/L2/LibraryManagementSystem/backend/test/issue_test.go:72
        	Error:      	Not equal: 
        	            	expected: 200
        	            	actual  : 400
        	Test:       	TestIssueBook
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] POST   /library                  --> github.com/swapxs/LibMS/backend/test.TestCreateLibrary.CreateLibrary.func1 (3 handlers)

2025/02/19 14:43:04 [31;1m/home/xs514-swabho/Documents/L2/LibraryManagementSystem/backend/controllers/library.go:27 [35;1mrecord not found
[0m[33m[0.071ms] [34;1m[rows:0][0m SELECT * FROM `libraries` WHERE name = "Test Library" AND `libraries`.`deleted_at` IS NULL ORDER BY `libraries`.`id` LIMIT 1
[GIN] 2025/02/19 - 14:43:04 | 201 |     564.038Âµs |                 | POST     "/library"
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] POST   /register-owner           --> github.com/swapxs/LibMS/backend/test.TestRegisterLibraryOwner.RegisterLibraryOwner.func1 (3 handlers)

2025/02/19 14:43:04 [31;1m/home/xs514-swabho/Documents/L2/LibraryManagementSystem/backend/controllers/owner.go:33 [35;1mrecord not found
[0m[33m[0.067ms] [34;1m[rows:0][0m SELECT * FROM `libraries` WHERE name = "Owner Library" AND `libraries`.`deleted_at` IS NULL ORDER BY `libraries`.`id` LIMIT 1
[GIN] 2025/02/19 - 14:43:04 | 201 |   81.361827ms |                 | POST     "/register-owner"
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] POST   /request                  --> github.com/swapxs/LibMS/backend/test.TestRaiseRequest.RaiseRequest.func1 (3 handlers)
[GIN] 2025/02/19 - 14:43:04 | 401 |      17.151Âµs |                 | POST     "/request"
--- FAIL: TestRaiseRequest (0.00s)
    request_events_test.go:41: 
        	Error Trace:	/home/xs514-swabho/Documents/L2/LibraryManagementSystem/backend/test/request_events_test.go:41
        	Error:      	Not equal: 
        	            	expected: 201
        	            	actual  : 401
        	Test:       	TestRaiseRequest
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /users                    --> github.com/swapxs/LibMS/backend/test.TestGetUsers.GetUsers.func1 (3 handlers)


[31m2025/02/19 14:43:04 [Recovery] 2025/02/19 - 14:43:04 panic recovered:
GET /users HTTP/1.1


Key "user" does not exist
/home/xs514-swabho/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:284 (0x744ac7)
	(*Context).MustGet: panic("Key \"" + key + "\" does not exist")
/home/xs514-swabho/Documents/L2/LibraryManagementSystem/backend/controllers/user.go:16 (0x811653)
	TestGetUsers.GetUsers.func1: claims := c.MustGet("user").(jwt.MapClaims)
/home/xs514-swabho/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 (0x7497ee)
	(*Context).Next: c.handlers[c.index](c)
/home/xs514-swabho/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102 (0x7497db)
	CustomRecoveryWithWriter.func1: c.Next()
/home/xs514-swabho/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 (0x748924)
	(*Context).Next: c.handlers[c.index](c)
/home/xs514-swabho/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249 (0x74890b)
	LoggerWithConfig.func1: c.Next()
/home/xs514-swabho/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 (0x747d11)
	(*Context).Next: c.handlers[c.index](c)
/home/xs514-swabho/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633 (0x747780)
	(*Engine).handleHTTPRequest: c.Next()
/home/xs514-swabho/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589 (0x747411)
	(*Engine).ServeHTTP: engine.handleHTTPRequest(c)
/home/xs514-swabho/Documents/L2/LibraryManagementSystem/backend/test/user_test.go:32 (0x8115b5)
	TestGetUsers: router.ServeHTTP(w, req)
/usr/local/go/src/testing/testing.go:1690 (0x5186d3)
	tRunner: fn(t)
/usr/local/go/src/runtime/asm_amd64.s:1700 (0x47c940)
	goexit: BYTE	$0x90	// NOP
[0m
[GIN] 2025/02/19 - 14:43:04 | 500 |     892.849Âµs |                 | GET      "/users"
--- FAIL: TestGetUsers (0.00s)
    user_test.go:34: 
        	Error Trace:	/home/xs514-swabho/Documents/L2/LibraryManagementSystem/backend/test/user_test.go:34
        	Error:      	Not equal: 
        	            	expected: 200
        	            	actual  : 500
        	Test:       	TestGetUsers
FAIL
FAIL	github.com/swapxs/LibMS/backend/test	0.373s
FAIL
